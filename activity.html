<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta charset="UTF-8" />
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin-top: 60px;
      }
      input, textarea {
        width: 300px;
        margin: 10px 0;
      }
      button {
        padding: 8px 16px;
      }
    </style>
  </head>
  <body>
    <h1>💚 활동하기</h1>

    <input type="text" id="cardTitle" placeholder="카드 제목" value="나의 성격" /><br />
    <textarea id="cardContent" placeholder="내용을 입력하세요">재밌어요</textarea><br />
    <button onclick="saveCard()">카드 저장</button>
    <p id="result" style="color: green;"></p>

    <script>
      function saveCard() {
        const student = {
          school: localStorage.getItem("school"),
          grade: localStorage.getItem("grade"),
          classNum: localStorage.getItem("class"),
          id: localStorage.getItem("id"),
          name: localStorage.getItem("name"),
          pw: localStorage.getItem("pw")
        };

        const data = {
          school: student.school,
          grade: student.grade,
          classNum: student.classNum,
          id: student.id,
          name: student.name,
          pw: student.pw,
          stage: "성격",
          title: document.getElementById("cardTitle").value,
          content: document.getElementById("cardContent").value
        };

        console.log("🔁 저장 요청 데이터:", data);

        google.script.run
          .withSuccessHandler(function (msg) {
            document.getElementById("result").innerText = msg;
          })
          .saveCardData(data);
      }
    </script>
  </body>
</html>
